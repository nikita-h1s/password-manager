{% extends "layout.html" %}
{% block content %}
<div class="">
    <main>
        <div class="user-settings-container">
            <h4 class="mb-3">Account settings</h4>
            <form class="needs-validation" novalidate>
                <div class="row g-3">
<!--                    <div class="col-12 d-flex align-items-start py-3 border-bottom">-->
<!--                        <div class="d-flex flex-column">-->
<!--                            <div class="d-flex align-items-start justify-content-between">-->
<!--                                <img src="https://images.pexels.com/photos/1037995/pexels-photo-1037995.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;w=500"-->
<!--                                     class="img rounded" alt="" width="70">-->
<!--                                <div class="pl-sm-4 pl-2" id="img-section">-->
<!--                                    <b>Profile Photo</b>-->
<!--                                    <p>-->
<!--                                        <small>Accepted file type .png. Less than 3MB</small>-->
<!--                                    </p>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="mb-3">-->
<!--                                <input class="form-control" type="file" id="formFile">-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

                    <form id="user-settings-form">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" value="{{ user.username }}"
                               class="form-control">

                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="{{ user.email }}" class="form-control">

                        <hr class="my-4">

                        <div>Automatic Logout Time</div>
                        <select id="automatic-logout-time" name="automatic_logout_time" class="form-select">
                            <option value="30" {% if user.automatic_logout_time == 30 %}selected{% endif %}>30 min
                            </option>
                            <option value="60" {% if user.automatic_logout_time == 60 %}selected{% endif %}>1 hour
                            </option>
                            <option value="360" {% if user.automatic_logout_time == 360 %}selected{% endif %}>6 hours
                            </option>
                            <option value="1440" {% if user.automatic_logout_time == 1440 %}selected{% endif %}>24
                                hours
                            </option>
                        </select>

                        <div class="form-check mt-3">
                            <input class="form-check-input" type="checkbox" id="show-passwords-by-default"
                                   name="show_passwords_by_default"
                                   {% if user.show_passwords_by_default %}checked{% endif %}>
                            <label class="form-check-label" for="show-passwords-by-default">
                                Show passwords by default
                            </label>
                        </div>

                        <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
                    </form>

                <hr class="my-4">

                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                <div class="mt-3 ml-3 mr-3">
                    {% for category, message in messages %}
                    <div class="alert alert-{{ category }} m-20 flash-message" role="alert">
                        {{ message }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                {% endwith %}

<!--                <div class="d-flex align-items-center justify-content-between" id="deactivate">-->
<!--                    <div>-->
<!--                        <b>Deactivate your account</b>-->
<!--                        <p>Details about your account and passwords</p>-->
<!--                    </div>-->
<!--                    <div class="ml-auto">-->
<!--                        <button class="btn btn-outline-danger ml-5">Deactivate</button>-->
<!--                    </div>-->
<!--                </div>-->
            </form>
        </div>
    </main>
</div>

<script>
    const user = {{ user | tojson }};
</script>

{% endblock content %}
